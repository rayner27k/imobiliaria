CREATE EXTENSION IF NOT EXISTS postgis;

-- Criar tabelas (se necessário, dependendo do seu esquema)
CREATE TABLE IF NOT EXISTS clientes (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100),
    email VARCHAR(100),
    telefone VARCHAR(15)
);

CREATE TABLE IF NOT EXISTS fazendas (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100),
    localizacao GEOMETRY(MultiPolygon, 4326),
    area NUMERIC
);

CREATE TABLE IF NOT EXISTS transacoes (
    id SERIAL PRIMARY KEY,
    cliente_id INT REFERENCES clientes(id),
    fazenda_id INT REFERENCES fazendas(id),
    data_transacao DATE,
    valor NUMERIC
);

-- Inserir dados na tabela de clientes
INSERT INTO clientes (nome, email, telefone) VALUES
('João Silva', 'joao@example.com', '123456789'),
('Maria Oliveira', 'maria@example.com', '987654321'),
('Carlos Santos', 'carlos@example.com', '456789123'),
('Ana Ferreira', 'ana@example.com', '321654987'),
('Fernanda Lima', 'fernanda@example.com', '654321987'),
('Ricardo Costa', 'ricardo@example.com', '987123654'),
('Juliana Almeida', 'juliana@example.com', '321789654');

-- Inserir dados na tabela de fazendas
INSERT INTO fazendas (nome, localizacao, area) VALUES
('fazenda_1', ST_GeomFromText('MULTIPOLYGON(((-59.138587117392937 -9.043199160678512, -59.131411004112877 -9.002375786607052, -59.049365278982471 -9.001669636972135, -59.049424690872847 -9.031725442155039, -59.092125365107123 -9.056695700940054, -59.138587117392937 -9.043199160678512)))', 4326), 47182264.9),
('fazenda_2', ST_GeomFromText('MULTIPOLYGON(((-45.820332710527623 -12.160297362053409, -45.821249404765076 -12.12109800823497, -45.780217859287582 -12.12519519347472, -45.763681343761583 -12.145249411980579, -45.773230136569808 -12.171270229726559, -45.820332710527623 -12.160297362053409)))', 4326), 26008176.56),
('fazenda_3', ST_GeomFromText('MULTIPOLYGON(((-50.233381942881948 -20.598738936538979, -50.232976955899623 -20.573085137867569, -50.211812971166232 -20.572909462459091, -50.211348853045699 -20.598646031346071, -50.233381942881948 -20.598738936538979)))', 4326), 6405708.42),
('fazenda_4', ST_GeomFromText('MULTIPOLYGON(((-51.339555669092221 -30.332510434038689, -51.329016884958229 -30.312248745255481, -51.254174040209527 -30.34003254467461, -51.273453036059813 -30.37559716189508, -51.343334141052651 -30.350537627434889, -51.339555669092221 -30.332510434038689)))', 4326), 33817429.0),
('fazenda_5', ST_GeomFromText('MULTIPOLYGON(((-37.824743688399202 -9.676658533753312, -37.826316450589452 -9.674466877808928, -37.823743877406898 -9.671448556614992, -37.818458594520131 -9.668960803375311, -37.817045578393483 -9.672659078567442, -37.8156851456189 -9.675028960290826, -37.819630937692537 -9.677351433704631, -37.822750467729072 -9.679730339823166, -37.823277479791038 -9.677236622981537, -37.824743688399202 -9.676658533753312)))', 4326), 721159.438);

-- Inserir dados na tabela de transacoes
INSERT INTO transacoes (cliente_id, fazenda_id, data_transacao, valor) VALUES
(1, 1, '2024-10-01', 1000000.00),
(2, 2, '2024-10-02', 500000.00);
